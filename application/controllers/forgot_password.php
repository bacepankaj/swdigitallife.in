<?	/**	* forgot password Controller Class	*	* @link http://somnetics.in/	* @copyright 2010-2011 Somnetics Pvt. Ltd.	* @author Susanta Das <susanta.das@somnet.co.in>	* @version 1.0.50	*/		class forgot_password extends Controller {		/**		* __construct class initialization		*		* Function __construct		* @author Susanta Das		*/		function __construct() {			parent::__construct(false);		}				function index($id){			// view template			$this->view->display('forgot_password/forgot_password.html', false, false);					}				function submit1(){			// check user exists			$sys_user = $this->model->use_table('sys_user')->where('user_name', $_POST['user_name'])->find_one();						/*// check user exists			if(is_object($sys_user))			{					// set mail recipient				$send_mail_to[$sys_user->id] = array('name'=>trim($sys_user->first_name.' '.$sys_user->last_name), 'email'=>$sys_user->user_name);				// email options				$options = array(					'copymark_user'=>0,					'single_recipient'=>0				);								// new password				$newpass = $this->functions->GenerateRandomString();														// mail body				$mail_body .= '<p style="margin-top:0">Dear '.trim($sys_user->first_name.' '.$sys_user->last_name).',</p>';				$mail_body .= '<p>Congratulations! you\'ve successfully changed your password.<br>';				$mail_body .= 'Your new password is <b>'.$newpass.'</b><br>';				$mail_body .= 'You can now login with this password and change this password from profile settings.</p>';				$mail_body .= '<p>&nbsp;</p><p>Thanks & Regards</p>';				$mail_body .= '<p style="margin-bottom:0">Bengalathon<br>';				//$mail_body .= '<span style="background-image: url('.AJAX_BASE_URL.'/application/public/images/mail.png);background-size: contain;background-position: left center;background-repeat: no-repeat;padding-left: 20px;">'.Session::get('user_name').'</span><br>';				//$mail_body .= '<span style="background-image: url('.AJAX_BASE_URL.'/application/public/images/web.png);background-size: contain;background-position: left center;background-repeat: no-repeat;padding-left: 20px;"><a href="'.AJAX_BASE_URL.'" target="_blank">'.AJAX_BASE_URL.'</a></span></p>';				$mail_body .= '<span style="background-image: url('.AJAX_BASE_URL.'/web.png);background-size: contain;background-position: left center;background-repeat: no-repeat;padding-left: 20px;"><a href="'.AJAX_BASE_URL.'" target="_blank">'.AJAX_BASE_URL.'</a></span></p>';									// send notification				$status = Notification::SendNotification(												ADMIN_ID,												$send_mail_to,												'Password reset successfully',													'Bengalathon Mail Notification',												$mail_body,												$options											);								// update password				$sys_user_login = $this->model->use_table('sys_user_login')->find_one($sys_user->id);				$sys_user_login->user_pass = md5($newpass);				$sys_user_login->save();								// redirect to location after login				$this->redirect('forgot_password/password_changed');						}			else			{					// show error message									MsgBox::view($this->view)->show(Lang::error(210)->msg, Lang::error(210)->title, null, false, 0, array('fa fa-warning', 'text-warning'), APP_PATH.'/forgot_password');			}*/		}				function password_changed(){			// show error message								//MsgBox::view($this->view)->show(Lang::error(211)->msg, Lang::error(211)->title, null, false, 3, array('fa fa-check', 'text-success'), APP_PATH.'/login');		}	}?>